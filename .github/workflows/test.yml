name: Test
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Run tests
      run: |
        set -euo pipefail
        docker run \
          --volume="$GITHUB_WORKSPACE:/mnt/workspace" \
          --workdir="/mnt/workspace" \
          --rm \
          sifive/environment-blockci:0.3.0 \
          tests/run-tests.sh
